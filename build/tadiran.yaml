substitutions:
  node_name: tadiran # Use a unique name.
  node_id: Tadiran_ac    # Use a unique id.
  friendly_node_name: "Tadiran AC"
  #deviceid: gree
  devicename: "ac controller"

esphome:
  name: "${node_name}"
  friendly_name: "${friendly_node_name}"
  name_add_mac_suffix: true

esp8266:
  board: esp01_1m

# Enable Home Assistant API
api:

web_server:
  port: 80
  local: true
  version: 3
  sorting_groups:
    - id: sorting_group_ac_controls
      name: "AC control"
      sorting_weight: 10
    - id: sorting_group_device_info
      name: "Device settings"
      sorting_weight: 20

captive_portal:

ota:
  - platform: web_server

wifi:
  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "tadiran-wifi"
    password: "1234567890"

# Enable logging
logger:
  baud_rate: 0 # disable LOG output on UART as UART is used for Sinclair AC unit
  level: DEBUG

uart:
  tx_pin: 1
  rx_pin: 3
  baud_rate: 4800
  parity: EVEN

time:
  - platform: sntp
    id: sntp_time
    timezone: "Asia/Jerusalem"

external_components:
  - source: github://gekkehenkie11/esphome_gree_ac
    components: [sinclair_ac]
    refresh: 0s

climate:
  - platform: sinclair_ac
    name: ${devicename}
    id: ac_controls
    horizontal_swing_select:
      name: ${devicename} Horizontal Swing Mode
    vertical_swing_select:
      name: ${devicename} Vertical Swing Mode
    display_select:
      name: ${devicename} Display Mode
    display_unit_select:
      name: ${devicename} Display Unit
    plasma_switch:
      name: ${devicename} Plasma
    beeper_switch:
      name: ${devicename} Beeper      
    sleep_switch:
      name: ${devicename} Sleep
    xfan_switch:
      name: ${devicename} X-fan
    save_switch:
      name: ${devicename} Save/8 Heat
    web_server:
      sorting_group_id: sorting_group_ac_controls
    
button:
  - platform: restart
    name: "reboot ${devicename}"
    id: reboot_device_button
    web_server:
      sorting_group_id: sorting_group_device_info
text_sensor:
  - platform: version
    name: "version"
    id: firmware_version
    web_server:
      sorting_group_id: sorting_group_device_info

